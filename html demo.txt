<!DOCTYPE html>
<html>
<head>
    <style>
        /* Base styles for a modern look */
        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px; /* Increased padding for better spacing */
            display: flex;
            flex-direction: column;
            align-items: center; /* Center items horizontally */
            justify-content: center; /* Center items vertically */
            min-height: 150px; /* Ensure enough height for embed frame */
            background-color: #f8f9fa; /* Light background for the embed container */
            color: #343a40;
            text-align: center;
        }

        /* Container for the UI elements */
        .vapi-demo-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Soft, prominent shadow */
            padding: 25px 35px; /* More padding inside the container */
            max-width: 380px; /* Max width for a neat look */
            width: 100%;
            box-sizing: border-box; /* Include padding in width calculation */
            transition: transform 0.3s ease-in-out; /* Subtle hover effect */
        }
        .vapi-demo-container:hover {
            transform: translateY(-3px); /* Lift effect on hover */
        }

        /* Title for the demo */
        h2 {
            font-size: 1.6em;
            color: #007bff; /* Primary blue color */
            margin-bottom: 15px;
            font-weight: 600;
        }

        /* Call to Action Button */
        #call-button {
            padding: 15px 30px; /* Larger button */
            font-size: 1.1em; /* Slightly larger text */
            font-weight: 600;
            cursor: pointer;
            border: none;
            border-radius: 30px; /* Pill-shaped button */
            background-color: #28a745; /* Success green */
            color: white;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 20px;
            width: 90%; /* Make button almost full width of container */
            max-width: 250px;
            box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2); /* Shadow for green button */
        }

        #call-button:hover {
            background-color: #218838; /* Darker green on hover */
            transform: translateY(-2px); /* Lift button on hover */
        }

        #call-button.calling {
            background-color: #dc3545; /* Danger red when calling */
            box-shadow: 0 4px 10px rgba(220, 53, 69, 0.2); /* Shadow for red button */
        }
        #call-button.calling:hover {
            background-color: #c82333; /* Darker red on hover */
        }

        /* Status Display */
        #call-status {
            margin-top: 20px;
            font-size: 1em;
            color: #6c757d; /* Muted gray for status */
            min-height: 20px; /* Prevent layout shift when text changes */
        }

        /* Loading animation for status */
        .status-loading::after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% {
                color: rgba(0,0,0,0);
                text-shadow:
                    .25em 0 0 rgba(0,0,0,0),
                    .5em 0 0 rgba(0,0,0,0);
            }
            40% {
                color: #6c757d;
                text-shadow:
                    .25em 0 0 rgba(0,0,0,0),
                    .5em 0 0 rgba(0,0,0,0);
            }
            60% {
                text-shadow:
                    .25em 0 0 #6c757d,
                    .5em 0 0 rgba(0,0,0,0);
            }
            80%, 100% {
                text-shadow:
                    .25em 0 0 #6c757d,
                    .5em 0 0 #6c757d;
            }
        }
    </style>
</head>
<body>

    <div class="vapi-demo-container">
        <h2>Talk to Our AI Assistant</h2>
        <button id="call-button">Start Conversation</button>
        <div id="call-status">Status: Ready to connect</div>
    </div>

    <script src="https://cdn.vapi.ai/web/vapi.es.js"></script>
    <script>
        const callButton = document.getElementById('call-button');
        const callStatus = document.getElementById('call-status');
        const demoContainer = document.querySelector('.vapi-demo-container');

        // --- IMPORTANT: REPLACE THESE WITH YOUR KEYS ---
        const VAPI_PUBLIC_KEY = 'a0ff9c26-99fa-40ef-a662-8ef75daf46bd'; // e.g., 'pk_YOUR_KEY_HERE'
        const VAPI_ASSISTANT_ID = '4ceb4d3f-2154-4b4a-932c-03d839808c95'; // e.g., 'asst_YOUR_ID_HERE'
        // ---------------------------------------------

        // Initialize Vapi with your Public Key
        const vapi = new Vapi(VAPI_PUBLIC_KEY);
        let isCalling = false;

        // Function to update status with loading dots
        const updateStatus = (message, isLoading = false) => {
            callStatus.textContent = message;
            if (isLoading) {
                callStatus.classList.add('status-loading');
            } else {
                callStatus.classList.remove('status-loading');
            }
        };

        // Handle button clicks
        callButton.addEventListener('click', () => {
            if (isCalling) {
                vapi.stop();
            } else {
                vapi.start(VAPI_ASSISTANT_ID);
            }
        });

        // --- Vapi Event Listeners for UI updates ---

        vapi.on('call-start', () => {
            isCalling = true;
            updateStatus('Status: Connecting', true);
            callButton.textContent = 'End Conversation';
            callButton.classList.add('calling');
            demoContainer.style.transform = 'scale(1.02)'; // Slight scale on call start
        });

        vapi.on('call-end', () => {
            isCalling = false;
            updateStatus('Status: Conversation ended.');
            callButton.textContent = 'Start Conversation';
            callButton.classList.remove('calling');
            demoContainer.style.transform = 'none'; // Reset scale
        });

        vapi.on('speech-start', () => {
            updateStatus('Status: AI is speaking', true);
        });

        vapi.on('speech-end', () => {
            updateStatus('Status: Your turn to speak');
        });

        vapi.on('mic-level', (level) => {
            // Optional: You could visualize mic level here if needed, e.g., a small bar
            // console.log('Mic Level:', level);
        });

        vapi.on('volume-level', (level) => {
            // Optional: You could visualize output volume here
            // console.log('Volume Level:', level);
        });

        vapi.on('error', (error) => {
            console.error('Vapi Error:', error);
            isCalling = false;
            updateStatus(`Status: Error - ${error.message || 'Please try again.'}`);
            callButton.textContent = 'Start Conversation';
            callButton.classList.remove('calling');
            demoContainer.style.transform = 'none'; // Reset scale
        });

        // Initial status update
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('Status: Ready to connect');
        });
    </script>

</body>
</html>